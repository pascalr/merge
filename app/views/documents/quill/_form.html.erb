<div>
  <%= form.hidden_field :raw_content, class: "article-content" %>
  <div id="editor-container" style="height: 30rem; width: 100%;">
    <%= raw(@document.raw_content) %>
  </div>
</div>

<!-- Include stylesheet -->
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
<!-- Include the Quill library -->
<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

<!-- Initialize Quill editor -->
<script>
  document.addEventListener("DOMContentLoaded", function (event) {
    var quill = new Quill('#editor-container', {
      modules: {
        toolbar: [
          [{ header: [1, 2, 3, 4, 5, 6, false] }],
          [{ color: [] }],
          [{ size: [] }],
          [
            'bold', 'italic', 'underline', 'strike',
            { 'script': 'super'},
            { 'script': 'sub' },
            'code', 'link'
          ],
          ['blockquote', 'code-block', 'image'],
          [{ list: 'ordered' }, { list: 'bullet' }],
          [{ align: ['center', 'right', 'justify', false] }],
          [{ indent: '-1'}, { indent: '+1' }]


        ],
      },
      theme: 'snow'
    });

    document.querySelector('form').onsubmit = function () {
      var body = document.querySelector('input[class=article-content]');
      body.value = quill.root.innerHTML
    };

    // More on this in a bit!
    quill.getModule('toolbar').addHandler('image', () => {
      importImage(quill);
    });
  });
</script>

<%# javascript_pack_tag "quill-editor" %>
